#!/usr/bin/make -f
###BOILERPLATE###

LANGCODE=aaaKDELANGCODEbbb
#take translations from stable branch to match our KDE 4.4.3 version
SVNREV=1142640

get-desktop:
	# Fetch all and any desktop file pos for KDE core modules from stable
	cd messages; \
		for module in kde*; do \
			cd $${module}; \
			svn export -r${SVNREV} svn://anonsvn.kde.org/home/kde/branches/stable/l10n-kde4/$(LANGCODE)/messages/$${module}/desktop_$${module}.po; \
			cd ..; \
		done; \
	cd ../..;

	# I do not claim to understand this magic here, but I really think it should get a comment
	-cp messages/kdebase/desktop_kdebase.po messages/kdebase/desktop_kdebase-runtime.po
	-cp messages/kdebase/desktop_kdebase.po messages/kdebase/desktop_kdebase-workspace.po
	-cp messages/kdepim/desktop_kdepim.po messages/kdepim/desktop_kdepim-runtime.po

	# Fetch playground and extragear desktop file pos as per list from pkg-kde-tools
	cd messages/kdelibs; \
		for file in `cat /usr/lib/kubuntu-desktop-i18n/desktop-template-list`; do \
 			svn export -r${SVNREV} svn://anonsvn.kde.org/home/kde/trunk/l10n-kde4/$(LANGCODE)/messages/$${file}.po; \
# 			svn export -r${SVNREV} svn://anonsvn.kde.org/home/kde/branches/stable/l10n-kde4/$(LANGCODE)/messages/$${file}.po; \
		done; \
	cd ../..;

%:
	dh --with kde --with quilt $@

override_dh_install:
	dh_install -i
	rm -f debian/kde-l10n-aaaUBUNTULANGCODEbbb/usr/share/locale/$(LANGCODE)/entry.desktop
